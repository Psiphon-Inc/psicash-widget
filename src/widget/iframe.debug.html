<!doctype html>
<html lang="en" debug="true">
  <head>
    <meta charset="utf-8">
    <!-- prevent the favicon request -->
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
    <title>PsiCash Iframe</title>

    <!--
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://api.psi.cash; base-uri 'none'; form-action 'none'">
    -->

  </head>
  <body>
    <h1>PsiCash Iframe Contents</h1>

    <hr>
    <label>page logs:</label>
    <ul id="logs">
    </ul>

    <script>
      function logger() {
        let values = [];
        for (let i = 0; i < arguments.length; i++) {
          values.push(arguments[i]);
        }
        const logElem = document.createElement('li');
        logElem.textContent = JSON.stringify(values);
        document.getElementById('logs').appendChild(logElem);
      }
      console.log = console.error = console.warn = logger;

      logger('location.href=', location.href);
      try {
        logger('location.href decoded=', atob(location.href.match(/psicash=((?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?)/)[1]));
      } catch (e) {}
    </script>

    <script src="psicash.js?debug=1"></script>
  </body>
</html>
